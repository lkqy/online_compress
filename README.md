# online compression

## 背景
内存存储的都是结构固定、部分字段有序的数据结构。存放原始数据会浪费大量空间，针对部分字段取值有限的现象，对这部分数据做压缩，从而实现节省内存。

## 主要方法 

1、采样最近N条数据，针对重复出现的数据特定压缩。

2、实时采样

3、底层压缩算法为snappy

4、使用tbb container实现线程安全

## 性能分析

case 1：0~1024的随机数
type    length   real_size   new_size   old_size
i	64		    256		    201		    205
i	128		    512		    292		    345
i	256		    1024		392		    591
i	512		    2048		451		    1106
i	1024		4096		523		    2125
i	2048		8192		708		    4137
i	4096		16384		1113		8150
i	8192		32768		1872		16224
l	64		    512		    213		    223
l	128		    1024		321		    378
l	256		    2048		421		    653
l	512		    4096		482		    1173
l	1024		8192		697		    2179
l	2048		16384		1083		4244
l	4096		32768		1852		8329
l	8192		65536		3384		16543
d	64		    512		    195		    221
d	128		    1024		326		    384
d	256		    2048		440		    662
d	512		    4096		511		    1161
d	1024		8192		723		    2193
d	2048		16384		1089		4266
d	4096		32768		1871		8369
d	8192		65536		3403		16630

length越大压缩率越高，在较低的case上效果不佳

